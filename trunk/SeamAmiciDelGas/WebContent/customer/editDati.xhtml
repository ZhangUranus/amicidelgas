<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="/layout/template.xhtml">

	<ui:define name="body">
	
	<h:form>
        <a:region>
		<rich:dataTable value="#{utenteHome.instance}" var="_dati" id="table" width="80%">
			<f:facet name="header">
				<h:outputText value="Riepilogo Contatti dell'utente #{_dati.nome}" />
			</f:facet>
				<rich:column >
					<f:facet name="header">
						<h:outputText value="E-mail" />
					</f:facet>
					<h:outputText value="#{_dati.email}" id="email" />
        		</rich:column>
        			
        		<rich:column>
					<f:facet name="header">
						<h:outputText value="Indirizzo" />
					</f:facet>
					<h:outputText value="#{_dati.indirizzo}" id="indirizzo" />
        		</rich:column>
        		
        		<rich:column>
					<f:facet name="header">
						<h:outputText value="Telefono" />
					</f:facet>
					<h:outputText value="#{_dati.recapitoTelefonico}" id="telefono" />
        		</rich:column>
        		
        		<rich:column>
	                <f:facet name="header">
	                        Azioni
	                </f:facet>
	                <a:commandLink ajaxSingle="true" id="editlink"
	                    oncomplete="#{rich:component('editPanel')}.show()">
	                    <h:graphicImage value="/img/modifica_mini.png" style="border:0"/>
	                    
	                </a:commandLink>
	                <rich:toolTip for="editlink" value="Modifica Recapiti"/>
	            </rich:column>     		
        		
		</rich:dataTable>
		</a:region>
    </h:form>
		 
		 
		 <rich:modalPanel id="editPanel" autosized="true" width="500">
	        <f:facet name="header">
	            <h:outputText value="Modifica i recapiti telefonici" />
	        </f:facet>
	        <f:facet name="controls">
	            <h:panelGroup>
	                <h:graphicImage value="/img/close.png"
	                    id="hidelink" />
	                <rich:componentControl for="editPanel" attachTo="hidelink"
	                    operation="hide" event="onclick" />
	            </h:panelGroup>
	        </f:facet>
	        <h:form>
	            <rich:messages style="color:red;"></rich:messages>
	            <h:panelGrid columns="1">
	            <a:outputPanel ajaxRendered="true">
	                <h:panelGrid columns="2">
	                    <h:outputText value="E-mail"/>
	                    <h:inputText id="campo-email" value="#{utenteHome.instance.email}" required="true" />
	                    <h:outputText value="Indirizzo" />
	                    <h:inputText id="campo-indirizzo" value="#{utenteHome.instance.indirizzo}" required="true" />
	                    <h:outputText value="Telefono" />
	                    <h:inputText id="campo-telefono" value="#{utenteHome.instance.recapitoTelefonico}" required="true"/>
	                </h:panelGrid>
	                <rich:message showSummary="true" showDetail="false" for="email"/>
	            </a:outputPanel>
	            <a:commandButton value="Salva"
	                action="#{utenteHome.update()}"
	                reRender="email, indirizzo, telefono"
	                oncomplete="#{rich:component('editPanel')}.hide();" />
	            </h:panelGrid>  
	        </h:form>
	    </rich:modalPanel> 
	
	    <a:status onstart="#{rich:component('wait')}.show()" onstop="#{rich:component('wait')}.hide()"/>
	    <rich:modalPanel id="wait" autosized="true" width="200" height="120" moveable="false" resizeable="false">
	        <f:facet name="header">
	            <h:outputText value="Processando le modifiche"/>
	        </f:facet>
	        <h:outputText value="Wait Please..."/>
	    </rich:modalPanel>
	    <rich:messages></rich:messages>
	
	</ui:define>

</ui:composition>