<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="/layout/template.xhtml">

    <ui:define name="body">

		<table width="96%" border="0" cellspacing="0" cellpadding="0" align="center" >
			<tr>
				<td colspan="3">
					<table width="90%" border="0" cellspacing="4" cellpadding="0" align="left" >
					  <tr>			    
					    <td rowspan="2" width="160" align="left">
					    	<s:decorate rendered="#{loginSelectBean.calculateMaxRole()=='admin'}"><img alt="statistiche" border="0" src="/SeamAmiciDelGas/img/president.jpg"/></s:decorate>
					    	<s:decorate rendered="#{loginSelectBean.calculateMaxRole()=='mediatore'}"><img alt="statistiche" border="0" src="/SeamAmiciDelGas/img/contatti.png"/></s:decorate>
					    	<s:decorate rendered="#{loginSelectBean.calculateMaxRole()=='utenteGas'}"><img alt="statistiche" border="0" src="/SeamAmiciDelGas/img/contatti.png"/></s:decorate>
					    </td>
					    <td valign="top"><div align="left" class="colore_1">Bentornato <b>#{currentUser.nome} #{currentUser.cognome}</b></div></td>			      
					  	<td valign="top"><div align="left" class="colore_1">I tuoi ruoli</div></td>			      
					  </tr>
					  <tr>
					    <td valign="top"><div align="left" class="explorer">
					    	<h:graphicImage value="/img/star_full.png" rendered="#{currentAccount.punteggioFeedback > 0.5}" />
							<h:graphicImage value="/img/star_full.png" rendered="#{currentAccount.punteggioFeedback > 1.5}" />
							<h:graphicImage value="/img/star_full.png" rendered="#{currentAccount.punteggioFeedback > 2.5}" />
							<h:graphicImage value="/img/star_full.png" rendered="#{currentAccount.punteggioFeedback > 3.5}" />
							<h:graphicImage value="/img/star_full.png" rendered="#{currentAccount.punteggioFeedback > 4.5}" />
							<h:graphicImage value="/img/star_half.png" rendered="#{currentAccount.punteggioFeedback == 0.5}" />
							<h:graphicImage value="/img/star_half.png" rendered="#{currentAccount.punteggioFeedback == 1.5}" />
							<h:graphicImage value="/img/star_half.png" rendered="#{currentAccount.punteggioFeedback == 2.5}" />
							<h:graphicImage value="/img/star_half.png" rendered="#{currentAccount.punteggioFeedback == 3.5}" />
							<h:graphicImage value="/img/star_half.png" rendered="#{currentAccount.punteggioFeedback == 4.5}" />
							<h:graphicImage value="/img/star_empty.png" rendered="#{!(currentAccount.punteggioFeedback > 0)}" />
							<h:graphicImage value="/img/star_empty.png" rendered="#{!(currentAccount.punteggioFeedback > 1)}" />
							<h:graphicImage value="/img/star_empty.png" rendered="#{!(currentAccount.punteggioFeedback > 2)}" />
							<h:graphicImage value="/img/star_empty.png" rendered="#{!(currentAccount.punteggioFeedback > 3)}" />
							<h:graphicImage value="/img/star_empty.png" rendered="#{!(currentAccount.punteggioFeedback > 4)}" />
							<li>Codice fiscale: #{currentUser.codiceFiscale}</li>                        	
                        	<li>Data Attivazione: <b>#{currentAccount.dataAccettazione}</b></li>
                        	<hr noshade="noshade" width="85%" align="left"/>
                        	<span class="colore_1">I tuoi contatti</span>
                        	<li>E-mail: #{currentUser.email}</li>
                        	<li>Telefono: #{currentUser.recapitoTelefonico}</li>
                        	<li>Indirizzo: #{currentUser.indirizzo}</li>
						</div></td>
						<td valign="top"><div align="left" class="explorer">
							<a:repeat var="_ruolo" value="#{rolesPerAccount.resultList}">
							<li><h:outputText value="#{_ruolo.name}"/></li>
							</a:repeat>
                        	<p></p>
                        	<s:button
                        		
                        	    rendered="#{(currentAccount.punteggioFeedback >= 3.5)}"
                        	    action="#{richiestaDriver.richiestaDriver()}" 
                        	    value="Proponiti come driver" />
                        	<!-- 
                        	<h:outputText rendered="#{(currentAccount.punteggioFeedback > 3.5)}"  >
                        		Proponiti come driver <img src="/SeamAmiciDelGas/img/driver_mini.png" border="0" align="middle"/>
                        	</h:outputText>
                        	 -->
						</div></td>
					  </tr>
					</table>	
				</td>
				<td >
					<table width="100%" border="0" cellspacing="0" cellpadding="0" align="right" >
					   <tr>
					    <td width="22" height="22" background="/SeamAmiciDelGas/img/shadow_a1.png"></td>
					    <td height="22" background="/SeamAmiciDelGas/img/shadow_top1.png"></td>
					    <td width="22" height="22" background="/SeamAmiciDelGas/img/shadow_b1.png"></td>
					   </tr>
					   <tr>
					   	<td background="/SeamAmiciDelGas/img/shadow_left1.png"></td>	
					     <td background="/SeamAmiciDelGas/img/shadow1.png">
								<div align="center" >TODO notifiche ed eventi
						<rich:dataTable  id="requestTable" var="_task"
									value="#{pooledTaskInstanceList}"
							rendered="#{identity.loggedIn and not empty pooledTaskInstanceList}">
							<h:column>
								<f:facet name="header">Message</f:facet>
												#{_task.variables.notificaDecisioneDriver.content}
									</h:column>
							<h:column>
								<f:facet name="header">Action</f:facet>
								<s:link action="#{richiestaDriverAck.acknowledge}" taskInstance="#{_task}"
									value="Acknowledge" />
							</h:column>
							<h:column>
								<f:facet name="header">Message</f:facet>
												#{_task.variables.notificaUtente.content}
									</h:column>
									<h:column>
								<f:facet name="header">Action</f:facet>
								<s:link action="#{inviaNotificaRegistrazioni.partecipa_alla_visita}" taskInstance="#{_task}"
									value="Accetta" />
							</h:column>
						</rich:dataTable>
									<li>notifica1</li>
                        			<li>notifica2</li>
                        			<li>notifica31</li>
                        			<li>notifica14</li>
                        	
								</div>			    
					     </td>
					     <td background="/SeamAmiciDelGas/img/shadow_right1.png" valign="middle"></td>
					   </tr>
					   <tr>
					    <td width="22" height="22" background="/SeamAmiciDelGas/img/shadow_d1.png"></td>
					    <td height="22" background="/SeamAmiciDelGas/img/shadow_bottom1.png"></td>
					    <td width="22" height="22" background="/SeamAmiciDelGas/img/shadow_c1.png"></td>
					   </tr>
					</table>	
				</td>
			</tr>
			<tr>
				<td colspan="4" height="16"><hr noshade="noshade" />	
				</td>
			</tr>
			<tr>
				<td width="25%">
					<table width="98%" border="0" cellspacing="2" cellpadding="0" align="center" >
					  <tr>			    
					    <td rowspan="2" align="left">
					    	<s:link view="/customer/editDati.xhtml"
				             propagation="none"
				                      id="utenteEditImg"
				                rendered="#{empty from}">
				                <f:param name="utenteCodiceFiscale"
				                        value="#{currentUser.codiceFiscale}"/>
				                <f:param name="accountUsername"
				                        value="#{currentAccount.username}"/>
					    	<img alt="statistiche" border="0" src="/SeamAmiciDelGas/img/modifica.png"/>
					    	</s:link>
					    	</td>
					    <td valign="bottom"><div align="left" class="colore_1">
					    	<s:link view="/customer/editDati.xhtml"
				                   value="Profilo"
				             propagation="none"
				                      id="utenteEdit2"
				                rendered="#{empty from}">
				                <f:param name="utenteCodiceFiscale"
				                        value="#{currentUser.codiceFiscale}"/>
				                <f:param name="accountUsername"
				                        value="#{currentAccount.username}"/>
				            </s:link>
					    	</div></td>			      
					  </tr>
					  <tr>
					    <td valign="top"><div align="left" class="explorer">Visualizza e modifica i tuoi dati, cancella il tuo account</div></td>
					  </tr>
					</table>
				</td>
				<td width="25%">
					<table width="98%" border="0" cellspacing="2" cellpadding="0" align="center" >
					  <tr>			    
					    <td rowspan="2" align="left"><a href="categories"><img alt="statistiche" border="0" src="/img/ico_config.jpg"/></a></td>
					    <td valign="bottom"><div align="left" class="colore_1"><a href="#">Configurazione portale</a></div></td>			      
					  </tr>
					  <tr>
					    <td valign="top"><div align="left" class="explorer">Configura i parametri </div></td>
					  </tr>
					</table>
				</td>
				<td width="25%">
					<table width="98%" border="0" cellspacing="2" cellpadding="0" align="center" >
					  <tr>			    
					    <td rowspan="2" align="left"><a href="/SeamAmiciDelGas/mediatore/puntiDiConsegna.seam"><img alt="statistiche" border="0" src="/img/ico_config.jpg"/></a></td>
					    <td valign="bottom"><div align="left" class="colore_1"><a href="/SeamAmiciDelGas/mediatore/puntiDiConsegna.seam">Punti di consegna</a></div></td>			      
					  </tr>
					  <tr>
					    <td valign="top"><div align="left" class="explorer">Aggiungi, Modifica, Elimina i Punti di Consegna </div></td>
					  </tr>
					</table>
				</td>
				<td width="25%">
					<table width="98%" border="0" cellspacing="2" cellpadding="0" align="center" >
					  <tr>			    
					    <td rowspan="2" align="left"><a href="categories"><img alt="statistiche" border="0" src="/img/ico_config.jpg"/></a></td>
					    <td valign="bottom"><div align="left" class="colore_1"><a href="#">Configurazione portale</a></div></td>			      
					  </tr>
					  <tr>
					    <td valign="top"><div align="left" class="explorer">Configura i </div></td>
					  </tr>
					</table>
				</td>
			</tr>
			
			
		<s:decorate rendered="#{loginSelectBean.calculateMaxRole()=='admin'}">	
			<tr>
			<td width="25%">
					<table width="98%" border="0" cellspacing="2" cellpadding="0" align="center" >
					  <tr>			    
					    <td rowspan="2" align="left">
					    	<s:link view="/admin/editDatiUtenti.xhtml"
				             propagation="none"
				                      id="editDatiUtentiRegistratiImg"
				                rendered="#{empty from}">
				                <f:param name="utenteCodiceFiscale"
				                        value="#{currentUser.codiceFiscale}"/>
				                <f:param name="accountUsername"
				                        value="#{currentAccount.username}"/>
					    	<img alt="statistiche" border="0" src="/SeamAmiciDelGas/img/customer40x50.jpg"/>
					    	</s:link>
					    	</td>
					    <td valign="bottom"><div align="left" class="colore_1">
					    	<s:link view="/admin/editDatiUtenti.xhtml"
				                   value="Utenti registrati"
				             propagation="none"
				                      id="editDatiUtentiRegistrati2"
				                rendered="#{empty from}">
				                <f:param name="utenteCodiceFiscale"
				                        value="#{currentUser.codiceFiscale}"/>
				                <f:param name="accountUsername"
				                        value="#{currentAccount.username}"/>
				            </s:link>
					    	</div></td>			      
					  </tr>
					  <tr>
					    <td valign="top"><div align="left" class="explorer">Visualizza e modifica i dati degli utenti</div></td>
					  </tr>
					</table>
				</td>
			
			<td width="25%">
					<table width="98%" border="0" cellspacing="2" cellpadding="0" align="center" >
					  <tr>			    
					    <td rowspan="2" align="left">
					    	<s:link view="/admin/editDatiCybercontadino.xhtml"
				             propagation="none"
				                      id="editDatiCybercontadiniRegistratiImg"
				                rendered="#{empty from}">
				                <f:param name="utenteCodiceFiscale"
				                        value="#{currentUser.codiceFiscale}"/>
				                <f:param name="accountUsername"
				                        value="#{currentAccount.username}"/>
					    	<img alt="statistiche" border="0" src="/SeamAmiciDelGas/img/contadino50x36.gif"/>
					    	</s:link>
					    	</td>
					    <td valign="bottom"><div align="left" class="colore_1">
					    	<s:link view="/admin/editDatiCybercontadino.xhtml"
				                   value="Cybercontadini registrati"
				             propagation="none"
				                      id="editDatiCybercontadiniRegistrati2"
				                rendered="#{empty from}">
				                <f:param name="utenteCodiceFiscale"
				                        value="#{currentUser.codiceFiscale}"/>
				                <f:param name="accountUsername"
				                        value="#{currentAccount.username}"/>
				            </s:link>
					    	</div></td>			      
					  </tr>
					  <tr>
					    <td valign="top"><div align="left" class="explorer">Visualizza e modifica i dati dei cybercontadini</div></td>
					  </tr>
					</table>
				</td>
			</tr>
		</s:decorate>	
			
		</table>

    </ui:define>
</ui:composition>
