<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="/layout/template.xhtml">
    
	<ui:define name="body">
	
		<div class="colore_1" align="center">Richieste Registrazioni Customer</div>
			<h:form>
		        <a:region>
			    	<rich:dataTable value="#{gestioneRegistrazioniBean.richiesteCustomer}" var="_accountRichiesta" id="table1" rows="5" width="50%">
			    		
			    		<rich:column>
							<f:facet name="header">
								<h:outputText value="Username" />
							</f:facet>
								<h:outputText value="#{_accountRichiesta.username}" id="username" />
		        		</rich:column>
			        		
			        	<rich:column >
							<f:facet name="header">
								<h:outputText value="Cognome" />
							</f:facet>
								<h:outputText value="#{_accountRichiesta.utente.cognome}" id="cognome" />
		        		</rich:column>
		        		
		        		<rich:column >
							<f:facet name="header">
								<h:outputText value="Nome" />
							</f:facet>
								<h:outputText value="#{_accountRichiesta.utente.nome}" id="nome" />
		        		</rich:column>
		        		
		        		<rich:column >
							<f:facet name="header">
								<h:outputText value="Comune" />
							</f:facet>
								<h:outputText value="#{_accountRichiesta.utente.comuneByIdcomune.nome}" id="comune" />
		        		</rich:column>	
			    
		    			<rich:column >
							<f:facet name="header">
								<h:outputText value="Data Richiesta" />
							</f:facet>
								<h:outputText value="#{_accountRichiesta.dataRichiesta}" id="dataRichiesta">
								<f:convertDateTime type="date" dateStyle="medium" locale="Locale.ITALY"/>
								</h:outputText>
		        		</rich:column>
			    
			    		<rich:column >
							<f:facet name="header">
								<h:outputText value="E-mail" />
							</f:facet>
								<h:outputText value="#{_accountRichiesta.utente.email}" id="email" />
		        		</rich:column>
		        		
		        		<rich:column align="center">
			                <f:facet name="header">
		                        Notifica
			                </f:facet>
			                <a:commandLink ajaxSingle="true" id="contattaCustomerlink"
			                    oncomplete="#{rich:component('contattaCustomerPanel')}.show()">
				                    <h:graphicImage value="/img/email.jpg" style="border:" width="41" height="32"/>
				                </a:commandLink>
				                <rich:toolTip for="contattaCustomerlink" value="Invia una notifica all'utente"/>
				            </rich:column>
		        		
		        		<rich:column align="center">
			                <f:facet name="header">
		                        Azione
			                </f:facet>
			                <a:commandLink ajaxSingle="true" id="richiestaCustomerLink"
			                    oncomplete="#{rich:component('richiestaCustomerPanel')}.show()">
			                    	<f:setPropertyActionListener value="#{_accountRichiesta}" target="#{gestioneRegistrazioniBean.currentCustomer}" />
				                    <h:graphicImage value="/img/modifica_mini.png" style="border:0" />
				                </a:commandLink>
				                <rich:toolTip for="richiestaCustomerLink" value="Valuta la richiesta di registrazione"/>
				            </rich:column>
               
			    	</rich:dataTable>
			    	<rich:datascroller align="center" for="table1" id="sc1" rendered="true"/>    
		        </a:region>
		    </h:form>
		      
		    <br/>
		    <br/>
		    <br/>
		    <br/>
		    
		    
		
			<rich:modalPanel id="richiestaCustomerPanel" autosized="true" width="500">
	        	<f:facet name="header">
	            	<h:outputText value="Valuta la richiesta di registrazione" />
	        	</f:facet>
	        	<f:facet name="controls">
	            	<h:panelGroup>
	                	<h:graphicImage value="/img/close.png"
	                    	id="hidelink" />
	               	 	<rich:componentControl for="richiestaCustomerPanel" attachTo="hidelink"
	                    	operation="hide" event="onclick" />
	            	</h:panelGroup>
	        	</f:facet>
	        	<h:form>
	        	<h:panelGrid columns="1">
	        		<a:outputPanel ajaxRendered="true">
	        			<h:panelGrid columns="2">
	        				<h:outputText><b>Username: </b></h:outputText>
	        				<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.username}"/>
	        				<h:outputText><b>Codice fiscale: </b></h:outputText>
	        				<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.utente.codiceFiscale}"/>
	        				<h:outputText><b>Cognome: </b></h:outputText>
	        				<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.utente.cognome}"/>
	        				<h:outputText><b>Nome: </b></h:outputText>
	        				<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.utente.nome}"/>
	        				<h:outputText><b>Data Richiesta Account: </b></h:outputText>
	        				<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.dataRichiesta}">
	        					<f:convertDateTime type="date" dateStyle="medium" locale="Locale.ITALY"/>
							</h:outputText>
							<h:outputText><b>E-mail: </b></h:outputText>
							<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.utente.email}"/>
							<h:outputText><b>Telefono: </b></h:outputText>
							<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.utente.recapitoTelefonico}"/>
							<h:outputText><b>Indirizzo: </b></h:outputText>
							<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.utente.indirizzo}"/>
							<h:outputText><b>Tipo di carta: </b></h:outputText>
							<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.pagamentoelettronico.tipoCarta}"/>
							<h:outputText><b>Numero della carta: </b></h:outputText>
							<h:outputText value="#{gestioneRegistrazioniBean.currentCustomer.pagamentoelettronico.numeroCarta}"/>
	        				<a:commandButton bypassUpdates="true" ajaxSingle="true" value="Accetta richiesta"
	                			action="#{gestioneRegistrazioniBean.accettaRegistrazioneCustomer}"
	                			reRender="table1, sc1"
	                			oncomplete="#{rich:component('richiestaCustomerPanel')}.hide(); if (#{gestioneRegistrazioniBean.updeted==true})  #{rich:component('richiestaAccettataCustomerPanel')}.show(); if (#{gestioneRegistrazioniBean.updeted==false}) #{rich:component('errorePanel')}.show();" />
                			<a:commandButton bypassUpdates="true" ajaxSingle="true" value="Rifiuta richiesta"
	                			action="#{accettaRegistrazioniBean.rifiutaRegistrazioneCustomer}"
	                			reRender="table1, sc1"
	                			oncomplete="#{rich:component('richiestaCustomerPanel')}.hide(); if (#{gestioneRegistrazioniBean.updeted==true}) #{rich:component('richiestaRifiutataCustomerPanel')}.show(); if (#{gestioneRegistrazioniBean.updeted==false}) #{rich:component('errorePanel')}.show();" />
	        			</h:panelGrid>
	        		</a:outputPanel>
                </h:panelGrid>
                </h:form>
	    </rich:modalPanel>
		
		<rich:modalPanel id="contattaCustomerPanel" autosized="true" width="500">
	        	<f:facet name="header">
	            	<h:outputText value="Contatta #{gestioneRegistrazioniBean.currentCustomer.utente.cognome} #{gestioneRegistrazioniBean.currentCustomer.utente.nome}" />
	        	</f:facet>
	        	<f:facet name="controls">
            	<h:panelGroup>
                	<h:graphicImage value="/img/close.png"
                    	id="hidelink1" />
               	 	<rich:componentControl for="contattaCustomerPanel" attachTo="hidelink1"
                    	operation="hide" event="onclick" />
            	</h:panelGroup>
        	</f:facet>
       	</rich:modalPanel>
       	
       	<rich:modalPanel id="richiestaAccettataCustomerPanel" autosized="true" width="350">
       		<f:facet name="header">
            	<h:outputText value="Esito operazione" />
        	</f:facet>
       		<f:facet name="controls">
            	<h:panelGroup>
                	<h:graphicImage value="/img/close.png"
                    	id="hidelink2" />
               	 	<rich:componentControl for="richiestaAccettataCustomerPanel" attachTo="hidelink2"
                    	operation="hide" event="onclick" />
            	</h:panelGroup>
        	</f:facet>
	        <h:panelGrid columns="1">
	        	<a:outputPanel ajaxRendered="true">
	        		<h:outputText value="L'account dell'utente #{gestioneRegistrazioniBean.currentCustomer.utente.cognome} #{gestioneRegistrazioniBean.currentCustomer.utente.nome} e' stato attivato con successo"/>
       			</a:outputPanel>
       		</h:panelGrid>
       	</rich:modalPanel>
       	
       	<rich:modalPanel id="richiestaRifiutataCustomerPanel" autosized="true" width="350">
       		<f:facet name="header">
            	<h:outputText value="Esito operazione" />
        	</f:facet>
       		<f:facet name="controls">
            	<h:panelGroup>
                	<h:graphicImage value="/img/close.png"
                    	id="hidelink3" />
               	 	<rich:componentControl for="richiestaRifiutataCustomerPanel" attachTo="hidelink3"
                    	operation="hide" event="onclick" />
            	</h:panelGroup>
        	</f:facet>
	        <h:panelGrid columns="1">
	        	<a:outputPanel ajaxRendered="true">
	        		<h:outputText value="L'account dell'utente #{gestioneRegistrazioniBean.currentCustomer.utente.cognome} #{gestioneRegistrazioniBean.currentCustomer.utente.nome} e' stato eliminato con successo"/>
       			</a:outputPanel>
       		</h:panelGrid>
       	</rich:modalPanel>
       	
       	<rich:modalPanel id="errorePanel" autosized="true" width="300">
	        	<f:facet name="header">
	            	<h:outputText value="Errore" />
	        	</f:facet>
	        	<f:facet name="controls">
            	<h:panelGroup>
                	<h:graphicImage value="/img/close.png"
                    	id="hidelink4" />
               	 	<rich:componentControl for="errorePanel" attachTo="hidelink4"
                    	operation="hide" event="onclick" />
            	</h:panelGroup>
        	</f:facet>
        	<h:panelGrid columns="1">
        		<h:outputText value="Aggiornamento non eseguito"/>
       		</h:panelGrid>
       	</rich:modalPanel>
       	
       	<rich:modalPanel id="contattaContadinoPanel" autosized="true" width="500">
	        	<f:facet name="header">
	            	<h:outputText value="Contatta #{gestioneRegistrazioniBean.currentCustomer.utente.cognome} #{gestioneRegistrazioniBean.currentCustomer.utente.nome}" />
	        	</f:facet>
	        	<f:facet name="controls">
            	<h:panelGroup>
                	<h:graphicImage value="/img/close.png"
                    	id="hidelink5" />
               	 	<rich:componentControl for="contattaContadinoPanel" attachTo="hidelink5"
                    	operation="hide" event="onclick" />
            	</h:panelGroup>
        	</f:facet>
       	</rich:modalPanel>
	
	</ui:define>    
    
</ui:composition>