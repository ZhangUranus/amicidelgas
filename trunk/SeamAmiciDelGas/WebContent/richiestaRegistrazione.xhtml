<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j"
    template="layout/template.xhtml">

<ui:define name="body">

	<h:form id="richiestaRegistrazioneForm">
	
    <rich:panel>
        <f:facet name="header">Passo 1 - richiesta registrazione</f:facet>    

			<s:decorate id="codiceFiscaleField" template="layout/edit.xhtml">
                <ui:define name="label">Codice fiscale</ui:define>
                <h:inputText id="codiceFiscale"
                       required="true"
                           size="16"
                      maxlength="16"
                      value="#{newUtente.codiceFiscale}">
                    <a:support event="onblur" 
                    reRender="codiceFiscaleField" 
                    action="#{newControllaCodiceFiscaleBean.controllaCodiceFiscale()}"
                    ajaxSingle="true"/>   
                </h:inputText>
                <h:outputText value="#{newControllaCodiceFiscaleBean.myResponse}" 
                style="color:red;"/>
                
            </s:decorate>

			<s:decorate id="nomeField" template="layout/edit.xhtml">
                <ui:define name="label">Nome</ui:define>
                <h:inputText id="nome"
                       required="true"
                           size="50"
                      maxlength="50"
                          value="#{newUtente.nome}">
                    <a:support event="onblur" reRender="nomeField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="cognomeField" template="layout/edit.xhtml">
                <ui:define name="label">Cognome</ui:define>
                <h:inputText id="cognome"
                       required="true"
                           size="50"
                      maxlength="50"
                          value="#{newUtente.cognome}">
                    <a:support event="onblur" reRender="cognomeField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="dataNascitaField" template="layout/edit.xhtml">
                <ui:define name="label">Data nascita</ui:define>
                <rich:calendar id="dataNascita"
                       required="true"
                          value="#{newUtente.dataNascita}" datePattern="MM/dd/yyyy" />
            </s:decorate>


            <s:decorate id="sessoField" template="layout/edit.xhtml">
                <ui:define name="label">Sesso</ui:define>
                
              <h:selectOneMenu id="sessoSelect" value="#{newUtente.sesso}">
              
        		<f:selectItem itemLabel="Maschio" itemValue="false"/>            
        		<f:selectItem itemLabel="Femmina" itemValue="true"/>
        		
			  </h:selectOneMenu>
			 
             </s:decorate>
			
			
			
			<s:decorate id="provinciaField" template="layout/edit.xhtml">
                <ui:define name="label">Provincia di nascita</ui:define>
                <h:selectOneMenu 
                	id="provinciaSelect"
                	value="#{newComuneAutoCompleteBean.provincia}">
                 <a:support event="onchange" ajaxSingle="true" reRender="provinciaField" 
                 action="#{newComuneAutoCompleteBean.checkProvincia()}"/>
          
                <s:selectItems 
                	noSelectionLabel=" "
                	var="_provincia" 
                	hideNoSelectionLabel="true"
                	label="#{_provincia.nome}" 
                	value="#{provincesList.resultList}">
                 	
                  </s:selectItems>
                <s:convertEntity></s:convertEntity>
                </h:selectOneMenu>
             </s:decorate>
			
			
			<s:decorate id="comuneNascitaSuggestionField" template="layout/edit.xhtml">
                <ui:define name="label">Comune di nascita (suggestion box)</ui:define>
                <h:inputText 
                	id="comuneNascitaSuggestion" 
                	disabled="!#{newComuneAutoCompleteBean.selectedProvincia}"
               >
                </h:inputText>
             <rich:suggestionbox id="suggestionBoxId" 
             		nothingLabel="Nessuna provincia trovata"
             		usingSuggestObjects="true"
             		suggestionAction="#{newComuneAutoCompleteBean.autocomplete}" var="_comuneSugg"
                    for="comuneNascitaSuggestion" fetchValue="#{_comuneSugg.nome}" tokens=",[]"
                    
                    >
                    <a:support event="onselect" ajaxSingle="true"  
                 action="#{newComuneAutoCompleteBean.setSelectedComune(_comuneSugg)}"/>
                 <s:convertEntity></s:convertEntity>
                    <h:column>
                        <h:outputText value="#{_comuneSugg.nome}" />
                    </h:column>
             </rich:suggestionbox>  
            
             </s:decorate>
			
            
            <s:decorate id="comunebyindirizzoField" template="layout/edit.xhtml">
                <ui:define name="label">residenza</ui:define>
                <h:inputText id="comunebyindirizzo"
                       required="true"
                           size="100"
                      maxlength="100"
                          value="#{newComuneResidenza.idcomune}">
                    <a:support event="onblur" reRender="comunebyindirizzoField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>

           
            <s:decorate id="indirizzoField" template="layout/edit.xhtml">
                <ui:define name="label">Indirizzo</ui:define>
                <h:inputText id="indirizzo"
                       required="true"
                           size="100"
                      maxlength="100"
                          value="#{newUtente.indirizzo}">
                    <a:support event="onblur" reRender="indirizzoField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>

	
            <s:decorate id="recapitoTelefonicoField" template="layout/edit.xhtml">
                <ui:define name="label">Recapito telefonico</ui:define>
                <h:inputText id="recapitoTelefonico"
                       required="true"
                           size="45"
                      maxlength="45"
                          value="#{newUtente.recapitoTelefonico}">
                    <a:support event="onblur" reRender="recapitoTelefonicoField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="emailField" template="layout/edit.xhtml">
                <ui:define name="label">Email</ui:define>
                <h:inputText id="email"
                       required="true"
                           size="70"
                      maxlength="70"
                          value="#{newUtente.email}">
                    <a:support event="onblur"  reRender="emailField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>

			<div style="clear:both">
                <span class="required">*</span>
                campi richiesti
            </div>

	</rich:panel>
	
		<div class="actionButtons">
            <h:commandButton id="passo1" value="procedi al passo 2" action="passo1Outcome"/>
        </div>    

    
    </h:form>

</ui:define>

</ui:composition>
