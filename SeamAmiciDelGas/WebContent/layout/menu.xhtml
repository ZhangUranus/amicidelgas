<h:form id="formMenu" 
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a="http://richfaces.org/a4j">
<table align="center" width="100%" cellpadding="2" cellspacing="0" border="0" style="background: url('/SeamAmiciDelGas/img/shadow.png');">
    
    <tr align="center">
    	<td width="64">	
    	</td>
    	<s:decorate rendered="#{identity.loggedIn and loginSelectBean.isCustomer}">
    	<td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" width="48" align="center" >
	        <s:link view="/customer/customerHome.xhtml" value="" propagation="none" rendered="#{identity.loggedIn and loginSelectBean.isCustomer}" >
	        	 <h:graphicImage value="/img/menu_home.png" />
	        	 <rich:toolTip value=""><span class="colore_black">Home Page</span></rich:toolTip>
	        </s:link>
	        <s:link view="/contadino/contadinoHome.xhtml" value="HOME" propagation="none" rendered="#{identity.loggedIn and !loginSelectBean.isCustomer}">
	        	<h:graphicImage value="/img/menu_home.png" />
	        	 <rich:toolTip value=""><span class="colore_black">Home Page</span></rich:toolTip>
	        </s:link>
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn and loginSelectBean.isCustomer}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" width="48" align="center" >
	        <s:link view="/customer/riceviNotifiche.xhtml" value="" propagation="none" rendered="#{identity.loggedIn and loginSelectBean.isCustomer}">
                    <h:graphicImage value="/img/menu_notifiche.png" />
                    <f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
		            <f:param name="accountUsername" value="#{currentAccount.username}"/>
		            <h:outputText rendered="#{(pooledTaskInstanceList.size() + taskInstanceList.size())>0}">
		            	<span id="notifiche_div" class="notifiche_class" ><img src="/SeamAmiciDelGas/img/red_number.png" /></span>
		            	<span style="width: 20px" id="notifiche_number_div" class="notifiche_num_class" >#{pooledTaskInstanceList.size() + taskInstanceList.size()}</span>
		            	<rich:toolTip value=""><span class="colore_black">Notifiche</span></rich:toolTip>
		            </h:outputText>
		    </s:link>
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn and loginSelectBean.isCustomer}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" width="48" align="center" >
	        <s:link view="/customer/customerHome.xhtml" value="" propagation="none" rendered="#{identity.loggedIn and loginSelectBean.isCustomer}" >
	        	 <h:graphicImage value="/img/menu_carrello.png" />
	        	 <rich:toolTip value=""><span class="colore_black">Carrello</span></rich:toolTip>
	        </s:link>
	        <s:link view="/contadino/contadinoHome.xhtml" value="HOME" propagation="none" rendered="#{identity.loggedIn and !loginSelectBean.isCustomer}"/>
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn and loginSelectBean.isCustomer}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
    	<td height="32" align="left" >
   			<rich:dropDownMenu style=" width : 100px;" rendered="#{identity.loggedIn and loginSelectBean.isCustomer}">
        	
        	<f:facet name="label"> 
    	        <h:panelGroup cellpadding="0" cellspacing="0" columns="2">
    	        	  <img id="customer_image" src="/SeamAmiciDelGas/img/menu_customer.png" align="middle" />
                      <h:outputLabel value="CUSTOMER" for="customer_image" />
                </h:panelGroup>
            </f:facet>
            
            <rich:menuItem submitMode="none" >
                    <s:link view="/customer/visualizzaOrdini.xhtml" value="ORDINI" propagation="none"/>
             </rich:menuItem>
        	
        	 <rich:menuItem submitMode="none"  >
                    <s:link view="/customer/editDati.xhtml" value="PROFILO" propagation="none">
                    	<f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
		                <f:param name="accountUsername" value="#{currentAccount.username}"/>
		            </s:link>
             </rich:menuItem>
             
             <rich:menuItem submitMode="none"  >
                    <s:link view="/customer/inviaNotifiche.xhtml" value="INVIA NOTIFICHE" propagation="none"/>
                    <f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
		            <f:param name="accountUsername" value="#{currentAccount.username}"/>
             </rich:menuItem> 
             
             <rich:menuItem submitMode="none" >
                    <s:link view="/customer/riceviNotifiche.xhtml" value="NOTIFICHE RICEVUTE (#{filtraNotifica.numberForGroupForCustomer() + filtraNotifica.numberForSingleForCustomer()})" propagation="none"/>
                    <f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
		            <f:param name="accountUsername" value="#{currentAccount.username}"/>
             </rich:menuItem> 
             
             <rich:menuItem submitMode="none"  >
                    <s:link view="/customer/browseCatalog.xhtml" value="VEDI CATALOGO" propagation="none"/>
                    <f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
		            <f:param name="accountUsername" value="#{currentAccount.username}"/>
             </rich:menuItem>
             
             <rich:menuItem submitMode="none" >
                    <s:link view="/customer/questionario.xhtml" value="QUESTIONARIO" propagation="none"/>
             </rich:menuItem>	
        	
        </rich:dropDownMenu>	
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn and (loginSelectBean.calculateMaxRole()=='mediatore' or loginSelectBean.calculateMaxRole()=='admin')}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" align="left" >
        	<rich:dropDownMenu style=" width : 100px;" rendered="#{identity.loggedIn and (loginSelectBean.calculateMaxRole()=='mediatore' or loginSelectBean.calculateMaxRole()=='admin')}">
	        	<f:facet name="label"> 
	    	        <h:panelGroup cellpadding="0" cellspacing="0" columns="2" align="center">
	    	        	  <img id="mediatore_image" src="/SeamAmiciDelGas/img/menu_mediatore.png" align="middle" />
	                      <h:outputText value="MEDIATORE" />
	                </h:panelGroup>
	            </f:facet>
	            
	            <rich:menuItem submitMode="none">
	                    <s:link view="/mediatore/accettaRegistrazioni.xhtml" value="RICHIESTE REGISTRAZIONI" propagation="none"/>
	             </rich:menuItem>
	             
	             <rich:menuItem submitMode="none">
	                    <s:link view="/mediatore/puntiDiConsegna.xhtml" value="PUNTI DI CONSEGNA" propagation="none"/>
	             </rich:menuItem>
	             
	             <rich:menuItem submitMode="none">
	                    <s:link view="/mediatore/richiesteDriver.xhtml" value="RICHIESTE DRIVER" propagation="none"/>
	             </rich:menuItem>
	        	
	        </rich:dropDownMenu>        
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn and loginSelectBean.calculateMaxRole()=='admin'}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" align="left" >
        	<rich:dropDownMenu style=" width : 100px;" rendered="#{identity.loggedIn and loginSelectBean.calculateMaxRole()=='admin'}">
	        	<f:facet name="label"> 
	    	        <h:panelGroup cellpadding="0" cellspacing="0" columns="2">
	    	        	  <img id="admin_image" src="/SeamAmiciDelGas/img/menu_admin.png" align="middle" />
	                      <h:outputText value="ADMIN" />
	                </h:panelGroup>
	            </f:facet>
	            	
	        	<rich:menuItem submitMode="none">
	                    <s:link view="/admin/editDatiUtenti.xhtml" value="UTENTI REGISTRATI" propagation="none">
	             			<f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
			            	<f:param name="accountUsername" value="#{currentAccount.username}"/>
			            </s:link>
	             </rich:menuItem>
	             
	             <rich:menuItem submitMode="none">
	                    <s:link view="/admin/editDatiCybercontadino.xhtml" value="CONTADINI REGISTRATI" propagation="none">
	             			<f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
			            	<f:param name="accountUsername" value="#{currentAccount.username}"/>
			            </s:link>
	             </rich:menuItem> 	
	        </rich:dropDownMenu>        
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn and loginSelectBean.driver}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" align="left" >
        	<rich:dropDownMenu style=" width : 78px;" rendered="#{identity.loggedIn and loginSelectBean.driver}">
        	
        	<f:facet name="label"> 
    	        <h:panelGroup cellpadding="0" cellspacing="0" columns="2">
    	        	 <img id="driver_image" src="/SeamAmiciDelGas/img/menu_driver.png" align="middle" />
                     <h:outputText value="DRIVER" />
                </h:panelGroup>
            </f:facet>
            
            <rich:menuItem submitMode="none" >
                    <s:link view="/driver/riceviNotifiche.xhtml" value="NOTIFICHE RICEVUTE (#{filtraNotifica.numberForGroupForDriver() + filtraNotifica.numberForSingleForDriver()})" propagation="none"/>
                    <f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
		            <f:param name="accountUsername" value="#{currentAccount.username}"/>
             </rich:menuItem>
            
            </rich:dropDownMenu>
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn and loginSelectBean.calculateMaxRole()=='utenteContadino'}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" align="left" >
  	        <rich:dropDownMenu style=" width : 100px;" rendered="#{identity.loggedIn and loginSelectBean.calculateMaxRole()=='utenteContadino'}">       	
	        	<f:facet name="label"> 
	    	        <h:panelGroup cellpadding="0" cellspacing="0" columns="2">
	    	        	  <img id="contadino_image" src="/SeamAmiciDelGas/img/menu_contadino.png" align="middle" />
	                      <h:outputText value="CONTADINO"/>
	                </h:panelGroup>
	            </f:facet>
	            
	            <rich:menuItem submitMode="none" >
                    <s:link view="/contadino/riceviNotifiche.xhtml" value="NOTIFICHE RICEVUTE (#{filtraNotifica.numberForSingleForContadino()})" propagation="none"/>
                    <f:param name="utenteCodiceFiscale" value="#{currentUser.codiceFiscale}"/>
		            <f:param name="accountUsername" value="#{currentAccount.username}"/>
             	</rich:menuItem>
             	
	        </rich:dropDownMenu>        
        </td>
        </s:decorate>
        <s:decorate rendered="#{!identity.loggedIn}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" align="left" >
			<s:link view="/login.xhtml" value="Login" propagation="none" rendered="#{!identity.loggedIn}"/>
        </td>
        </s:decorate>
        <s:decorate rendered="#{!identity.loggedIn}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" align="left" >
	        <s:link view="/registrazione.xhtml" value="Registrazione" propagation="none" rendered="#{!identity.loggedIn}"/>
        </td>
        </s:decorate>
        <s:decorate rendered="#{identity.loggedIn}">
        <td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
        <td height="32" align="left" >
	        <s:link view="/home.xhtml" action="#{identity.logout}" value="LOGOUT" propagation="none" rendered="#{identity.loggedIn}" />
    	</td>
        </s:decorate> 
        <s:decorate rendered="#{identity.loggedIn}">
    	<td width="16" align="center" >
    		<img src="/SeamAmiciDelGas/img/palliniello.gif"/>	
    	</td>
    	<td height="32" >	
	        <h:outputText style="color:red" value="LOGGED AS: #{identity.username}" rendered="#{identity.loggedIn}" />
    	</td>
    	</s:decorate>
    	<td width="64">	
    	</td>
    </tr>	
</table >

<s:decorate rendered="#{identity.loggedIn}">
<div id="notifiche_lista" style="display:block;" class="div_notifiche_lista_class">
	<table width="280px" cellpadding="0" cellspacing="0" border="0" id="table_notifiche_liste">
	  <tr>
	    <td width="22" height="22" background="/SeamAmiciDelGas/img/shadow_a1.png"></td>
	    <td height="22" colspan="2" background="/SeamAmiciDelGas/img/shadow_top1.png"></td>
	    <td width="22" height="22" background="/SeamAmiciDelGas/img/shadow_b1.png"></td>
	  </tr>
      <tr>
	  	<td background="/SeamAmiciDelGas/img/shadow_left1.png"></td>
	    <td background="/SeamAmiciDelGas/img/shadow1.png" align="left" >
    		<span class="colore_black_bold">Notifiche Personali</span><br /><br />
    		<span class="colore_black_bold">Richieste Driver</span><br /><br />	
    		<span class="colore_black_bold">Registrazioni cybercontadino</span>	
	    </td>
	    <td width="26px" background="/SeamAmiciDelGas/img/shadow1.png" align="left" >
    		<span class="colore_black_bold">#{filtraNotifica.numberForGroupForCustomer() + filtraNotifica.numberForSingleForCustomer()}</span><br /><br />
    		<span class="colore_black_bold">#{filtraNotifica.numberForGroupForCustomer() + filtraNotifica.numberForSingleForCustomer()}</span><br /><br />	
    		<s:decorate rendered="#{(filtraNotifica.numberOfTaskForGroup('crea_visita') > 0)}">
    			<div align="center" class="colore_white_bold" style="background:transparent url('/SeamAmiciDelGas/img/red_number.png') no-repeat; width:26px; height: 28px; padding-top: 4px; padding-left: 1px;" >#{filtraNotifica.numberOfTaskForGroup('crea_visita')}</div>
    		</s:decorate>
	    </td>
	  	<td background="/SeamAmiciDelGas/img/shadow_right1.png"></td>
	  </tr>
	  <tr>
	    <td width="22" height="22" background="/SeamAmiciDelGas/img/shadow_d1.png"></td>
	    <td height="22" colspan="2" background="/SeamAmiciDelGas/img/shadow_bottom1.png"></td>
	    <td width="22" height="12" background="/SeamAmiciDelGas/img/shadow_c1.png"></td>
	  </tr>
	</table>
</div>
</s:decorate>
</h:form>